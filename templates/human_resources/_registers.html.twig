{# templates/human_resources/biometrico.html.twig #}
{% extends 'human_resources/human_resource.html.twig' %}
{% block javascripts %}
	{{ encore_entry_script_tags('app') }}
{% endblock %}


{% block content %}
    <h1>CARGA DE REGISTROS</h1>
	<h1>Cargar Archivo Excel</h1>
	<div class="container">
		{# Formulario para cargar el archivo Excel #}
		<form id="uploadForm" action="{{ path('app_biometric') }}" method="post" enctype="multipart/form-data" class="text-center">
			<div class="mb-3 container pt-5">
				<label for="excel_file" class="form-label">Seleccione un archivo Excel:</label>
				<input type="file" name="excel_file" id="excel_file" class="form-control form-control-sm" required>
			</div>
            {# Botón para enviar (inicialmente visible) #}
            <button id="submitBtn" type="submit" class="btn btn-primary bottom-0">Cargar</button>
            {# Botón de loading (inicialmente oculto) #}
            <button id="loadingBtn" class="btn btn-primary" type="button" disabled style="display: none;">
                <span class="spinner-grow spinner-grow-sm"></span>
                Procesando..
            </button>

		</form>
	</div>
	{# Previsualización de los datos, si están presentes #}
	{% if sheetData is defined %}
		<h2 class="mt-5">Previsualización de Datos</h2>
		<table class="table table-striped mt-3">
			<thead >
				<tr>
					{% for headers in header %}
                    <th class="text-center align-middle">      
                            {{ headers }}
                    </th>
                {% endfor %}
				</tr>
			</thead>
			<tbody>
				{% for row in sheetData %}
					<tr>
						{% for key, cell in row %}
						{# Verifica si es el campo 'holiday' y si es true #}
							{% if key == 'holiday' and cell == true %}
								<td class="align-middle" style="background-color: red; color: white;">Día festivo</td>
							{% else %}
								<td>{{ cell }}</td>
							{% endif %}
						{% endfor %}
					</tr>
				{% endfor %}
			</tbody>
		</table>
		<br><br>
				{# Botón para guardar los datos en la base de datos #}
			<form action="#" method="post" class="position-fixed bottom-0 end-0 translate-middle-x mb-4">
				<button type="submit" class="btn btn-success my-2">
					<i class="bi bi-save"></i>
				Guardar</button>
			</form>
	{% endif %}

{% endblock %}
